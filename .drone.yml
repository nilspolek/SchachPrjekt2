kind: pipeline
name: default

steps:
  - name: Test Project
    image: maven:3.9.3-eclipse-temurin-20-alpine
    commands:
      - mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
      - mvn test -B 
  - name: discord notification
    image: appleboy/drone-discord
    settings:
      webhook_id: 
        from_secret:  discordID
      webhook_token: 
        from_secret:  discordToken
      message: >
        {{#success build.status}}
          Build {{build.number}} succeeded. Good job {{build.author}}.
        {{else}}
           Build {{build.number}} failed. Fix me please. 
        {{/success}}
        Git Message was {{build.message}} on Branch {{build.branch}} link: {{build.link}}
        
      username: Drone CI
